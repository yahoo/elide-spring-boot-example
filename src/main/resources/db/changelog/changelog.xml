<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <changeSet author="admin" id="1539122071">
        <sql>
	CREATE TABLE ArtifactGroup (
	  name varchar(255) NOT NULL,
	  commonName varchar(255) DEFAULT NULL,
	  description varchar(255) DEFAULT NULL,
          deprecated boolean,
	  PRIMARY KEY (name)
	);

    CREATE TABLE ArtifactProduct (
       name varchar(255) NOT NULL,
       commonName varchar(255) DEFAULT NULL,
       description varchar(255) DEFAULT NULL,
       group_name varchar(255) DEFAULT NULL,
       PRIMARY KEY (name),
       FOREIGN KEY (group_name) REFERENCES ArtifactGroup(name)
    );

	CREATE TABLE ArtifactVersion (
       name varchar(255) NOT NULL,
       createdAt timestamp DEFAULT NULL,
       artifact_name varchar(255) DEFAULT NULL,
       PRIMARY KEY (name),
       FOREIGN KEY (artifact_name) REFERENCES ArtifactProduct(name)
    );
    
    CREATE TABLE AsyncQuery (
       id varchar(36) NOT NULL,
       principalName varchar(255),
       query varchar(1024) NOT NULL,
       queryType int NOT NULL,
       status int NOT NULL,
       createdOn timestamp NOT NULL,
       updatedOn timestamp NOT NULL,
       naturalkey varchar(255) NOT NULL,
       PRIMARY KEY (id)
     );

     CREATE TABLE AsyncQueryResult (
       id varchar(36) NOT NULL,
       contentLength integer NOT NULL,
       responseBody varchar(10485760) NOT NULL,
       status integer NOT NULL,
       createdOn timestamp NOT NULL,
       updatedOn timestamp NOT NULL,
       query_id varchar(36) NOT NULL,
       naturalkey varchar(255) NOT NULL,
       PRIMARY KEY (id),
       FOREIGN KEY (query_id) REFERENCES AsyncQuery(id)
     );
       CREATE TABLE PlayerStats (
          name varchar(255) NOT NULL,
          countryId varchar(255) DEFAULT NULL,
          highScore integer DEFAULT NULL,
          createdOn date,
          PRIMARY KEY (name)
        );
        CREATE TABLE PlayerCountry (
          id varchar(255) NOT NULL,
          isoCode varchar(255) DEFAULT NULL,
          PRIMARY KEY (id)
        );
       </sql>
    </changeSet>
    <changeSet author="admin" id="1539122270">
        <sql>
        INSERT INTO PlayerStats (name,countryId,createdOn) VALUES
                ('SerenaWilliams','1','2000-10-01'),
                ('SaniaMirza','2','2002-10-01');
        INSERT INTO PlayerCountry (id,isoCode) VALUES
	        ('1','USA'),
                ('2','IND');
        INSERT INTO ArtifactGroup (name, commonName, description) VALUES
		('com.example.repository','Example Repository','The code for this project'),
		('com.yahoo.elide','Elide','The magical library powering this project');

    INSERT INTO ArtifactProduct (name, commonName, description, group_name) VALUES
       ('elide-core','Core','The guts of Elide','com.yahoo.elide'),
       ('elide-datastore-hibernate5','Hibernate5 Datastore','A datastore that uses Hibernate 5 to communicate with the database','com.yahoo.elide'),
       ('elide-standalone','Standalone','A pre-configured, standalone Elide webservice','com.yahoo.elide');
        </sql>
    </changeSet>
</databaseChangeLog>
